---
layout: post
title: Request UPS Published Retail Rates in ASPDotNetStorefront
---

<p>Have you ever had one of those moments as a developer where you feel like an absolute idiot?  I seem to have quite a few!  This recent issue has brought that same feeling yet again.</p>
<p>A customer recently contacted us complaining that the Real Time UPS rates being returned to their shopping cart were less than the rates being returned when they quoted them on the site.</p>
<p>We assumed this was an easy problem to solve and went straight to the APPCONFIG section of the ASPDotNetStorefront admin area and searched for the usual RTShipping.UPS configs.  None of those appeared to be the obvious item to fix our issue.  Please remember, at this point in time, we did not know the proper terminology for what rates we needed to return.</p>
<p>Several contacts to UPS tech support later, we learned that we were wanting "UPS Retail Rates" and that we were receiving "UPS Daily Rates".  Two different operators offered us two different solutions.  The first solution was to remove an item that was not even included in our request XML, so I tried again.  </p>
<p>The second operator described that we needed to modify the XML request to include the "CustomerClassification" node with a "Code" value of "04".</p>
<p>Upon reviewing the source code of the RTShipping.cs class, I found a section appropriately commented with the following:</p>
<p>//Add proper elements to support SuggestedRetailRates</p>
<p>It then had a conditional block that included the "CustomerClassification" node with a "Code" value of "04".  This node was only added if the "RTShippping.UPS.UPSPickupType" AppConfig was set to "UPSSUGGESTEDRETAILRATES".</p>
<p>So after several hours of trying to modify the XML generated by the source code and of reading the UPS XML documentation, it turns out there was an AppConfig to accomplish our goal!  Man, I feel like a dummy!  But, ASPDotNetStorefront, how about coming up with better naming conventions for your AppConfig items????  </p>
